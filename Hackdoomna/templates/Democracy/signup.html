{% load static %}
<html>
<head>
    <title>signup_page</title>
    <link rel="stylesheet" type="text/css" href="/static/css/user_signup.css">
    <link href="https://fonts.googleapis.com/css?family=Poppins:600&display=swap" rel="stylesheet">
</head>
<body background="/static/img/indiagate.webp">
<div class="loginbox">

    <h1>Fill your details</h1>

    <form name=myform method="post" action="{% url 'Register' %}" onsubmit="return validateForm()">

        {% csrf_token %}

        <input id="text1" minlength="12" maxlength="12" type="text" name="username" placeholder="Enter Your UID"
               required>


        <input id="text1" minlength="8" type="password" name="password1" placeholder="Create Password" required>
        <input id="text1" minlength="8" type="password" name="password2" placeholder="Confirm Password" required>


        <input type="submit" name="submit" value="SIGN UP">

        <p id="link2">Already have an Account <a id="link2" href="{% url 'Signin' %}">Sign IN</a></p>
    </form>

</div>
<script type="text/javascript">
  function validateForm() {
      var x = document.forms["myform"]["username"].value;
      var p1 = document.forms["myform"]["password1"].value;
      var p2 = document.forms["myform"]["password2"].value;

    var d=[
    [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
    [1, 2, 3, 4, 0, 6, 7, 8, 9, 5],
    [2, 3, 4, 0, 1, 7, 8, 9, 5, 6],
    [3, 4, 0, 1, 2, 8, 9, 5, 6, 7],
    [4, 0, 1, 2, 3, 9, 5, 6, 7, 8],
    [5, 9, 8, 7, 6, 0, 4, 3, 2, 1],
    [6, 5, 9, 8, 7, 1, 0, 4, 3, 2],
    [7, 6, 5, 9, 8, 2, 1, 0, 4, 3],
    [8, 7, 6, 5, 9, 3, 2, 1, 0, 4],
    [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
];

// permutation table p
var p=[
    [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
    [1, 5, 7, 6, 2, 8, 3, 0, 9, 4],
    [5, 8, 0, 3, 7, 9, 6, 1, 4, 2],
    [8, 9, 1, 6, 0, 4, 3, 5, 2, 7],
    [9, 4, 5, 3, 1, 2, 6, 8, 7, 0],
    [4, 2, 8, 6, 5, 7, 3, 9, 0, 1],
    [2, 7, 9, 3, 8, 0, 6, 4, 1, 5],
    [7, 0, 4, 6, 9, 1, 3, 2, 5, 8]
];

var inv = [0, 4, 3, 2, 1, 5, 6, 7, 8, 9];


var c = 0;
var len = x.length-1;
//var i=0;
	for (var i = 0; i < len; ++i){
		c = d[c][p[((i + 1) % 8)][x.charAt(len - i - 1) - '0']];
  }
var temp=inv[c];
  if (x.charAt(len)==temp) {
     if(p1==p2){
        alert("valid");
        return true;
     }
     else{
        alert("invalid password");
        return false;
     }
  }
  else {
    alert("Invalid UID Number");
    return false;
  }
}

</script>


</body>
</html>
